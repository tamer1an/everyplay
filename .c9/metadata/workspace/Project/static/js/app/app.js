{"filter":false,"title":"app.js","tooltip":"/Project/static/js/app/app.js","undoManager":{"mark":46,"position":46,"stack":[[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":37,"column":10},"end":{"row":37,"column":43}},"text":"https://everyplay.com/api/videos?"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":38,"column":15},"end":{"row":38,"column":55}},"text":"336d586b6e1b5e4a0f9eaa48e7e697d8cd51db40"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":44,"column":0},"end":{"row":44,"column":29}},"text":"    lastVideosQueryResult:[],"},{"action":"removeLines","range":{"start":{"row":40,"column":0},"end":{"row":44,"column":0}},"nl":"\n","lines":["        offset:0,","        limit:24","    },","    lastVideosQuery:{    },"]},{"action":"removeText","range":{"start":{"row":39,"column":3},"end":{"row":39,"column":24}},"text":" defaultVideosQuery:{"},{"action":"removeText","range":{"start":{"row":39,"column":3},"end":{"row":40,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":38,"column":0},"end":{"row":38,"column":17}},"text":"    client_id:'',"},{"action":"removeLines","range":{"start":{"row":37,"column":0},"end":{"row":38,"column":0}},"nl":"\n","lines":["    URL: '',"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":38,"column":0},"end":{"row":38,"column":3}},"text":"   "},{"action":"removeLines","range":{"start":{"row":37,"column":0},"end":{"row":38,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":37,"column":0},"end":{"row":38,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":55,"column":0},"end":{"row":55,"column":6}},"text":"    },"},{"action":"removeLines","range":{"start":{"row":42,"column":0},"end":{"row":55,"column":0}},"nl":"\n","lines":["        return this.defaultVideosQuery;","    },","    getClientId:function(){","        return this.client_id;","    },","    getURL:function(options){","        return this.URL+options;","    },","\tsetLastVideosQueryResult:function(arr){","        this.lastVideosQueryResult=arr;","    },","    setLastVideosQuery:function(options){","        this.lastVideosQuery=options;"]},{"action":"removeText","range":{"start":{"row":41,"column":3},"end":{"row":41,"column":37}},"text":" getDefaultVideosQuery:function(){"},{"action":"removeText","range":{"start":{"row":41,"column":3},"end":{"row":42,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":42,"column":27},"end":{"row":43,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":43,"column":0},"end":{"row":43,"column":8}},"text":"        "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":55,"column":18},"end":{"row":56,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":56,"column":0},"end":{"row":56,"column":8}},"text":"        "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":56,"column":8},"end":{"row":57,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":57,"column":0},"end":{"row":57,"column":8}},"text":"        "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":44,"column":8},"end":{"row":44,"column":11}},"text":"// "},{"action":"insertText","range":{"start":{"row":45,"column":8},"end":{"row":45,"column":11}},"text":"// "},{"action":"insertText","range":{"start":{"row":46,"column":8},"end":{"row":46,"column":11}},"text":"// "},{"action":"insertText","range":{"start":{"row":48,"column":8},"end":{"row":48,"column":11}},"text":"// "},{"action":"insertText","range":{"start":{"row":49,"column":8},"end":{"row":49,"column":11}},"text":"// "},{"action":"insertText","range":{"start":{"row":50,"column":8},"end":{"row":50,"column":11}},"text":"// "},{"action":"insertText","range":{"start":{"row":51,"column":8},"end":{"row":51,"column":11}},"text":"// "},{"action":"insertText","range":{"start":{"row":52,"column":8},"end":{"row":52,"column":11}},"text":"// "},{"action":"insertText","range":{"start":{"row":53,"column":8},"end":{"row":53,"column":11}},"text":"// "},{"action":"insertText","range":{"start":{"row":54,"column":8},"end":{"row":54,"column":11}},"text":"// "},{"action":"insertText","range":{"start":{"row":55,"column":8},"end":{"row":55,"column":11}},"text":"// "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":59,"column":8},"end":{"row":59,"column":11}},"text":"// "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":57,"column":0},"end":{"row":57,"column":8}},"text":"        "},{"action":"removeText","range":{"start":{"row":56,"column":8},"end":{"row":57,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":56,"column":8},"end":{"row":57,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":71,"column":0},"end":{"row":71,"column":21}},"text":"        } ,true,true)"},{"action":"removeLines","range":{"start":{"row":60,"column":0},"end":{"row":71,"column":0}},"nl":"\n","lines":["        var options = this.getDefaultVideosQuery();","            options.client_id = this.getClientId();","","        this.getVideosJSON(options);","","        this.addEventHandler(document.getElementById('video-filter'),'change',function(evt){","            var options = App.getDefaultVideosQuery();","                options.client_id = App.getClientId();","                options.order = evt.target.selectedOptions[0].value;","","                App.getVideosJSON(options);"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":57,"column":8},"end":{"row":57,"column":11}},"text":"// "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":54,"column":0},"end":{"row":54,"column":16}},"text":"        //     }"},{"action":"removeLines","range":{"start":{"row":46,"column":0},"end":{"row":54,"column":0}},"nl":"\n","lines":["        //         videosList =   document.querySelector('section[data-role=\"content\"]');","","        //     if(e.state == undefined){","        //       footer.classList.add(\"hidden\");","        //       videosList.classList.remove(\"hidden\");","        //     }else{","        //         footer.classList.remove(\"hidden\");","        //         videosList.classList.add(\"hidden\");"]},{"action":"removeText","range":{"start":{"row":45,"column":4},"end":{"row":45,"column":73}},"text":"    //     var footer =   document.getElementsByTagName('footer')[0],"},{"action":"removeText","range":{"start":{"row":45,"column":4},"end":{"row":46,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":45,"column":0},"end":{"row":45,"column":4}},"text":"    "},{"action":"removeText","range":{"start":{"row":44,"column":65},"end":{"row":45,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":43,"column":0},"end":{"row":43,"column":8}},"text":"        "},{"action":"removeText","range":{"start":{"row":42,"column":27},"end":{"row":43,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":45,"column":0},"end":{"row":45,"column":8}},"text":"        "},{"action":"removeText","range":{"start":{"row":44,"column":21},"end":{"row":45,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":55,"column":0},"end":{"row":55,"column":5}},"text":"    }"},{"action":"removeLines","range":{"start":{"row":50,"column":0},"end":{"row":55,"column":0}},"nl":"\n","lines":["\tgetVideosJSON:function(options){","        this.setLastVideosQuery(options);","        this.requestGET(options,function(txt){","            App.insertVideo(JSON.parse(txt));","        });"]},{"action":"removeText","range":{"start":{"row":49,"column":5},"end":{"row":49,"column":6}},"text":","},{"action":"removeText","range":{"start":{"row":49,"column":5},"end":{"row":50,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":115,"column":0},"end":{"row":115,"column":5}},"text":"    }"},{"action":"removeLines","range":{"start":{"row":81,"column":0},"end":{"row":115,"column":0}},"nl":"\n","lines":["        evt.target.parentNode.parentNode.parentNode.classList.add(\"hidden\");","        var footer = App.dqAll('footer[data-role=\"single-video\"]')[0],","            fragment = document.createDocumentFragment(),","            h1   = document.createElement('h1'),","            video = document.createElement('video'),","","            div = document.createElement('div'),","            img   = document.createElement('img'),","            p1   = document.createElement('p'),","            p2   = document.createElement('p'),","","            dataSet = evt.target.dataset;","","        footer.innerHTML=\"\"","","        video.setAttribute('src', dataSet.src);","        h1.innerHTML  = dataSet.title;","","        img.setAttribute('src',dataSet.avatar);","        p1.innerHTML = dataSet.user;","        p2.innerHTML = dataSet.date;","        p2.setAttribute('class','r');","        div.appendChild(img);","        div.appendChild(p2);","        div.appendChild(p1);","","        fragment.appendChild(h1);","        fragment.appendChild(video);","        fragment.appendChild(div);","","        footer.appendChild(fragment);","","        history.pushState({videoSrc: dataSet.src}, \"title\", \"replay\");","        footer.classList.remove(\"hidden\");"]},{"action":"removeText","range":{"start":{"row":80,"column":27},"end":{"row":80,"column":28}},"text":"{"},{"action":"removeText","range":{"start":{"row":80,"column":27},"end":{"row":81,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":80,"column":0},"end":{"row":80,"column":27}},"text":"    showVideo:function(evt)"},{"action":"removeLines","range":{"start":{"row":51,"column":0},"end":{"row":80,"column":0}},"nl":"\n","lines":["        var div, p, img,","            fragment = document.createDocumentFragment();","","        App.setLastVideosQueryResult(arr);","","           for(var i=0; i<arr.length; i++){","              div = document.createElement('div');","              p   = document.createElement('p');","              img = document.createElement('img');","","              img.setAttribute('id','videoModelItem-'+i);","              img.setAttribute('src',arr[i].thumbnail_url);","              img.setAttribute('data-src',arr[i].video_url);","              img.setAttribute('data-user',arr[i].user.username);","              img.setAttribute('data-date',arr[i].created_at);","              img.setAttribute('data-title',arr[i].title);","              img.setAttribute('data-avatar',arr[i].user.avatar_url_small);","","              p.innerHTML = ['<span>',arr[i].title ,'</span>','<br>','<b>', arr[i].user.username ,'</b>'].join(\"\")","              div.appendChild(img);","              div.appendChild(p);","","              this.addEventHandler(img,'click',this.showVideo, true);","              fragment.appendChild(div);","           }","\t\t   ","        document.getElementById('videos').innerHTML=\"\";","        document.getElementById('videos').appendChild(fragment);","    },"]},{"action":"removeText","range":{"start":{"row":50,"column":4},"end":{"row":50,"column":30}},"text":"insertVideo:function(arr){"},{"action":"removeText","range":{"start":{"row":50,"column":4},"end":{"row":51,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":50,"column":0},"end":{"row":50,"column":4}},"text":"    "},{"action":"removeText","range":{"start":{"row":49,"column":6},"end":{"row":50,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":49,"column":5},"end":{"row":49,"column":6}},"text":","}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":38,"column":8},"end":{"row":38,"column":61}},"text":"videos_thumb:'section[data-role=\"content\"] div > img'"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":34,"column":0},"end":{"row":34,"column":2}},"text":"};"},{"action":"removeLines","range":{"start":{"row":5,"column":0},"end":{"row":34,"column":0}},"nl":"\n","lines":["//Object factory","var Factory = function(){","    this.constructor=function(){};","    this.objType = {};","    this.createNewObj = function (obj) {","        obj = (typeof(window[obj])=='object') ? window[obj] : { error: 'no such class name in global space' };","","        this.setObjType(obj);","        var func = this.getObjConstructor();","","        if (obj.extend){","            var f = new Factory();","            func.prototype = f.createNewObj(obj.extend);","        }","","        for (var prop in obj){","            func.prototype[prop] = obj[prop];","        }","        return new func();","    };","    this.getObjType = function(){","        return this.objType;","    };","    this.setObjType = function(obj){","        this.objType = obj","    };","    this.getObjConstructor = function(obj){","        return this.getObjType().constructor;","    }"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":4,"column":0},"end":{"row":5,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":4,"column":0},"end":{"row":5,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":20,"column":0},"end":{"row":21,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":88,"column":0},"end":{"row":88,"column":2}},"text":"};"},{"action":"removeLines","range":{"start":{"row":21,"column":0},"end":{"row":88,"column":0}},"nl":"\n","lines":["","Utils = {","    constructor:function(){","","    },","    dqAll : function (sel){","        return document.querySelectorAll(sel);","    },","    elemHasAttribute:function(elementName,attribute){","        var element = document.createElement(elementName);","        return attribute in element;","    },","    addEventHandler:function(oNode, evt, oFunc,bCaptures,onlyRootElement){","        if (oNode.length>0 && onlyRootElement!==true) {","            for (var idx in oNode){","                if (typeof(oNode[idx]) == \"object\")","                    oNode[idx].addEventListener(evt, oFunc, bCaptures);","            }","            return;","        }","        oNode.addEventListener(evt, oFunc, bCaptures);","","        //TODO: support ie","        //if (typeof(window.event) != \"undefined\")","        //oNode.attachEvent(\"on\"+evt, oFunc);","    },","    requestGET:function(options,callback){","        var strParams = this.createGETString(options);","        var xmlhttp = this.requestStart(strParams,function() {","            if (xmlhttp.readyState == 4) {","                if(xmlhttp.status == 200) {","                    callback(xmlhttp.responseText);","                }","            }","        });","    },","    requestStart:function(options,callback){","        var xmlhttp = this.getRequestObj();","        xmlhttp.open('GET', this.getURL(options) , true);","        xmlhttp.onreadystatechange = callback;","        xmlhttp.send(null);","","        return xmlhttp;","    },","    getRequestObj:function(){","        var xmlhttp;","        try {","            xmlhttp = new ActiveXObject(\"Msxml2.XMLHTTP\");","        } catch (e) {","            try {","                xmlhttp = new ActiveXObject(\"Microsoft.XMLHTTP\");","            } catch (E) {","                xmlhttp = false;","            }","        }","        if (!xmlhttp && typeof XMLHttpRequest!='undefined') {","            xmlhttp = new XMLHttpRequest();","        }","        return xmlhttp;","    },","    createGETString:function(options){","        var requestString = '';","        for (var item in options){","            requestString += [item,'=',options[item],'&'].join(\"\")","        }","        return requestString;","    }"]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":5,"column":0},"end":{"row":5,"column":5}},"text":"Video"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":4,"column":0}},"nl":"\n","lines":["window.onload = function(){","    var f = new Factory();","    window.App = f.createNewObj('VideoApp');","};"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":0,"column":0},"end":{"row":1,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":1}},"text":"v"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":1},"end":{"row":0,"column":2}},"text":"a"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":2},"end":{"row":0,"column":3}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":3},"end":{"row":0,"column":4}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":8,"column":21},"end":{"row":9,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":9,"column":0},"end":{"row":9,"column":8}},"text":"        "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":8},"end":{"row":9,"column":9}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":9},"end":{"row":9,"column":10}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":10},"end":{"row":9,"column":11}},"text":"b"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":11},"end":{"row":9,"column":12}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":12},"end":{"row":9,"column":13}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":13},"end":{"row":9,"column":14}},"text":"g"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":14},"end":{"row":9,"column":15}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":9,"column":15},"end":{"row":9,"column":16}},"text":"r"}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":9,"column":16},"end":{"row":9,"column":16},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1413894888504,"hash":"fe748fcd3b92112eaccd83f56d4c42d235f04fca"}